<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>MONITOR ASSET HISTORY </title>
    <link href="css/styles.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" crossorigin="anonymous"></script>
    <!--Jquery 3.4.0 manual-->
    <script src="js/jquery.js"></script>
    <!-- AJAX HARUS ADA-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script>
        window.onload = () => {

            // Clear localStorage
            if (localStorage.getItem('token') === 'true') {
                localStorage.removeItem('token');
                // Show them the sign in form
            }
        };
    </script>

    <style>
        .table-custom {
            background-color: #244065;
        }
        
        .table-custom th {
            color: white;
        }
        
        tbody tr:nth-child(even) {
            background-color: #D6EAF8;
            color: #244065;
        }
        
        table th:nth-child(5) {
            display: none;
        }
        
        table td:nth-child(5) {
            display: none;
        }
        
        .card-custom {
            display: none;
        }
        
        .card {
            border: none;
        }
        
        .myInputHp {
            display: none;
        }
        
        .bg-card {
            background-color: #523633;
        }
        
        .alert-bg {
            background-color: #ebe682;
        }
        
        .font-card {
            color: #FBFCFC;
            font-size: 17px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .font-list {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif
        }
        
        .btn-card {
            background-color: #a77a39;
            color: white;
        }
        
        .btn-back {
            background-color: #ea6f50;
            color: white;
        }
        
        .myInputHp {
            display: none;
        }
        
        @media only screen and (max-width: 480px) {
            table {
                display: none;
            }
            .card-custom {
                display: inline;
            }
            .myInputHp {
                display: inline;
                color: white
            }
            .myInputHp2 {
                background-color: #523633;
            }
            /* table th:nth-child(1) {
                display: none;
            }
            table th:nth-child(3) {
                display: none;
            }
            table th:nth-child(4) {
                display: none;
            }
            table th:nth-child(5) {
                display: table-cell;
            }
            table td:nth-child(5) {
                display: table-cell;
            }
            table td:nth-child(1) {
                display: none;
            }
            table td:nth-child(3) {
                display: none;
            }
            table td:nth-child(4) {
                display: none;
            }
            table td {
                font-size: 18px;
            } */
        }
    </style>
</head>

<body class="sb-nav-fixed" id="body">
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
        <a class="navbar-brand" href="Dashboard.html">Brasil Management</a>
        <button class="btn btn-link btn-sm order-1 order-lg-0" id="sidebarToggle" href="#"><i class="fas fa-bars"></i></button>
        <!-- Navbar Search-->
        <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0">
            <div class="input-group">
                <input class="form-control" id="myInput" type="text" placeholder="Search for..." aria-label="Search" aria-describedby="basic-addon2" />
                <div class="input-group-append">
                    <button class="btn btn-primary" type="button"><i class="fas fa-search"></i></button>
                </div>
            </div>
        </form>
        <!-- Navbar-->
        <ul class="navbar-nav ml-auto ml-md-0">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="userDropdown" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <script>
                        var n = localStorage.getItem("username");
                        document.getElementById("userDropdown").innerHTML = `<i class="fas fa-user fa-fw text-white"></i> ` + n;
                    </script>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                    <a class="dropdown-item" href="HistoryLogin.html"> <i class="fas fa-user-clock mr-2 text-success"></i>Activity Log</a>
                    <a class="dropdown-item" href="updatepassword.html"><i class="fas fa-unlock-alt mr-2 text-warning"></i>Update Password</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="index.html" onclick="deleteItems()"><i class="fas fa-power-off mr-2 text-danger"></i>Logout</a>
                </div>
            </li>
        </ul>
    </nav>
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-menu-heading text-white">Interface</div>
                        <a class="nav-link text-light" href="Dashboard.html">
                            <div class="sb-nav-link-icon "><i class="fas fa-home text-white"></i>
                            </div>
                            Dashboard
                        </a>
                        <div class="sb-sidenav-menu-heading text-white" style="padding: 18px 16px 12px;">Menu </div>
                        <div id="sidenavAccordionPages"></div>
                        <div class="sb-sidenav-menu-heading"></div>
                        <!-- 
                        <a class="nav-link" href="tables.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            MONITOR BARANG
                        </a>
                        <a class="nav-link" href="asset.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            MONITOR ASSET
                        </a>
                        <a class="nav-link" href="getAsset.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            MONITOR HISTORY ASSET
                        </a> -->
                    </div>
                </div>
                <div class="sb-sidenav-footer">
                    <div class="small text-white " id="user"></div>
                    <script>
                        var n = localStorage.getItem("username");
                        document.getElementById("user").innerHTML = `Logged in as   : ` + n;
                    </script>
                </div>
            </nav>
        </div>
        <div id="layoutSidenav_content">
            <main>
                <div class="container-fluid">
                    <h1 class="mt-4"></h1>
                    <ol class="breadcrumb mb-4 alert alert-bg" role="alert">
                        <li class="breadcrumb-item ">HISTORY COUNTER</li>
                    </ol>
                    <div class="card mb-4">
                        <div class="card-body">
                            <div class="input-group">
                                <input class="form-control myInputHp" style="border: 1px solid #523633;" id="myInputHp" type="text" placeholder="Search Tanggal History" aria-label="Search" aria-describedby="basic-addon2" />
                                <div class="input-group-append ">
                                    <button class="btn myInputHp myInputHp2" type="button"><i class="fas fa-search"></i></button>
                                </div>
                            </div>
                            <!-- <form class="mt-3">
                                <div class="form-row align-items-center">
                                    <div class="col-auto my-1"> -->
                            <!-- <label class="mr-sm-2" for="inlineFormCustomSelect">Pilih History Asset</label> -->
                            <!-- <select class="custom-select border border-dark mr-sm-2 mb-1" id="idHistory">
                                            <script>
                                                const NameHistory = localStorage.getItem("NameHistory");
                                                document.getElementById("idHistory").innerHTML = `<option selected>${NameHistory}</option> ` ;
                                            </script>
                                      <option value="1">Mesin Fotocopy IR 6075 ADV</option>
                                      <option value="2">Mesin Fotocopy Ir 6570</option>
                                      <option value="3">PLN Token Apoitk</option>
                                      <option value="4">PLN R3 7700 VA BBT</option>
                                      <option value="5">PLN R2 5500 VA BBT</option>
                                      <option value="6">PDAM BBT</option>
                                      <option value="7">PDAM APT N2</option>
                                      <option value="8">PDAM Bogor Baru Blok A R7</option>                                    </option>
                                      <option value="9">PDAM PAKUAN R6</option>
                                      <option value="10">APOTIK PRIMA</option>
                                      <option value="11">INDIHOME</option>
                                      <option value="12">FERAWATI</option>
                                      <option value="13">B.SIANG 3</option>
                                    </select>
                                    </div>
                                  
                                </div>
                            </form> -->
                            <a type="button" class="btn btn-small btn-back mt-4 ml-1" href="6counter.html">Back Menu Counter</a>
                        </div>
                    </div>
                    <div class="card mb-4">
                        <div class="card-body bg-light">
                            <!--Table Resposive-->
                            <div class="table-responsive">
                                <table class="table table-bordered table-hover " width="100%" cellspacing="0">
                                    <thead class="table-custom">
                                        <tr>
                                            <th class="text-center">Nomor</th>
                                            <th class="text-center">Tanggal</th>
                                            <th class="text-center">Selisih</th>
                                            <th class="text-center">Keterangan</th>
                                            <th class="text-center">DetailData</th>
                                            <th class="text-center">Image</th>
                                        </tr>
                                    </thead>

                                    <tbody id="demo">
                                    </tbody>
                                </table>
                            </div>
                            <!-- Card Resposive-->
                            <div class="card-custom" id="card-list">
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <footer class="py-4 bg-light mt-auto">
                <div class="container-fluid">
                    <div class="d-flex align-items-center justify-content-between small">
                        <div class="text-muted">Copyright &copy; Brasil Store 2020</div>
                        <div>
                            <a href="#">Privacy Policy</a> &middot;
                            <a href="#">Terms &amp; Conditions</a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Detail Data</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
                </div>
                <div class="modal-body">
                    <ul class="list-group" id="lis">

                    </ul>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!--Modal Gambar-->
    <div class="modal fade" id="exampleModalGambar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Image </h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
                </div>
                <div class="modal-body">
                    <img id="img3" src="" class="img-fluid " alt="Responsive image">
                </div>

            </div>
        </div>
    </div>

    <!-- Search Data-->
    <script>
        $(document).ready(function() {

            $(`#myInput`).on(`keyup`, function() {
                let value = $(this).val().toLowerCase();
                $(`#demo tr`).filter(function() {

                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)

                });
            });
        });
    </script>

    <!-- Search Data HP-->
    <script>
        $(document).ready(function() {

            $(`#myInputHp`).on(`keyup`, function() {
                let value = $(this).val().toLowerCase();
                $(`#card-list .data`).filter(function() {

                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)

                });
            });
        });
    </script>


    <!-- NAMPILKAN DATA OBJECT-->
    <script>
        const x = localStorage.getItem("token");
        console.log(x);
        console.log(x);

        const localIdHistory = localStorage.getItem("historyId");

        const localIdHistoryInt = parseInt(localIdHistory)
        console.log(localIdHistoryInt)

        var settings = {
            "url": "https://okt20.onlineberkas.com/api/assets/get-history",
            "method": "POST",
            "timeout": 0,
            "headers": {
                "Content-Type": "application/json"
            },
            "data": JSON.stringify({
                "token": x,
                "id": localIdHistoryInt
            }),
        };


        $.ajax(settings).done(function(response) {

            let data = (response);

            // console.log(response);

            var table = '<table>';
            var nomor = 1;
            var list = `<ul>`
            let card = "";
            const cardtampil = document.getElementById('card-list');
            for (let item of data) {

                id = item.tanggal;
                imgPath = item.pathImage;

                tanggal = new Date(item.tanggal);

                var tahun = tanggal.getFullYear();
                var bulan = tanggal.getMonth();
                var tanggalhari = tanggal.getDate();
                var hari = tanggal.getDay();

                switch (hari) {
                    case 0:
                        hari = "Minggu";
                        break;
                    case 1:
                        hari = "Senin";
                        break;
                    case 2:
                        hari = "Selasa";
                        break;
                    case 3:
                        hari = "Rabu";
                        break;
                    case 4:
                        hari = "Kamis";
                        break;
                    case 5:
                        hari = "Jum'at";
                        break;
                    case 6:
                        hari = "Sabtu";
                        break;
                }

                switch (bulan) {
                    case 0:
                        bulan = "Januari";
                        break;
                    case 1:
                        bulan = "Februari";
                        break;
                    case 2:
                        bulan = "Maret";
                        break;
                    case 3:
                        bulan = "April";
                        break;
                    case 4:
                        bulan = "Mei";
                        break;
                    case 5:
                        bulan = "Juni";
                        break;
                    case 6:
                        bulan = "Juli";
                        break;
                    case 7:
                        bulan = "Agustus";
                        break;
                    case 8:
                        bulan = "September";
                        break;
                    case 9:
                        bulan = "Oktober";
                        break;
                    case 10:
                        bulan = "November";
                        break;
                    case 11:
                        bulan = "Desember";
                        break;
                }

                var tampilTanggal = hari + ", " + tanggalhari + " " + bulan + " " + tahun;


                table += '<tr>';
                table += `<td class="text-center">${nomor++}</td>`;
                table += `<td class="text-center">${tampilTanggal}</td>`;
                table += `<td class="text-center">${item.selisih}</td>`;
                table += `<td class="text-center">${item.keterangan}</td>`;
                table += `<td class="text-center"><button type="button" id="${id}" class="btn btn-small btn-primary id_detail" data-toggle="modal" data-target="#exampleModal">
                            Detail
                            </button></td>`;
                table += `<td class="text-center"><button type="button" id="${imgPath}" class="btn btn-small btn-danger id_gambar" data-toggle="modal" data-target="#exampleModalGambar">
                            Image
                            </button></td>`;

                card += `    
                     <div class="data" id="example">  
                <div class="card border card-header mt-4 font-card bg-card">
                  <span>  <i class="fas fa-clock mr-1"></i> History Counter </span> 
                                    </div>
                                    <ul class="list-group list-group-flush border">
                                        <li class="list-group-item font-list">Keterangan : ${item.keterangan}</li>
                                        <li class="list-group-item font-list">Tanggal : ${tampilTanggal}</li>
                                        <li class="list-group-item font-list">Jumlah Selisih : ${item.selisih}</li>                                                          
                                    </ul>
                                    <div class="card-body border mb-3">
                                        <button type="button" id="${imgPath}" class="btn btn-small btn-card id_gambar" data-toggle="modal" data-target="#exampleModalGambar">
                                            Image
                                        </button>
                                    </div>
                   </div>                 
                                    `;


                table += '</tr>';

            }

            table += '</table>';
            document.getElementById('demo').innerHTML = table;
            cardtampil.innerHTML = card;


            var list = '<ul>'

            const idDetail = document.querySelectorAll(".id_detail");
            idDetail.forEach((el) => {
                el.addEventListener('click', function(event) {
                    const IdDetail = event.target.id;
                    let modal = "";
                    const Modal = document.getElementById('lis');
                    for (let modul of data) {
                        if (IdDetail === modul.tanggal) {
                            modal += `
            <li class="list-group-item"><span class="font-weight-bold">Tanggal</span>  :    ${modul.tanggal}</li>
            <li class="list-group-item"><span class="font-weight-bold">Selisih</span>  :     ${modul.selisih}</li>
            <li class="list-group-item"><span class="font-weight-bold">Keterangan</span>  :     ${modul.keterangan}</li>

`
                        }
                    }
                    Modal.innerHTML = modal;

                })
            })


            const Path = document.querySelectorAll(".id_gambar");
            Path.forEach((el) => {
                el.addEventListener("click", function(event) {
                    const PathGambar = event.target.id;
                    console.log(PathGambar)
                    let modalGambar = "";
                    for (let modul of data) {
                        if (PathGambar === modul.pathImage) {

                            var dataImage = JSON.stringify({
                                "namafile": modul.pathImage
                            });

                            var xhr = new XMLHttpRequest();
                            xhr.onreadystatechange = function() {
                                if (this.readyState == 4 && this.status == 200) {
                                    //this.response is what you're looking for
                                    // handler(this.response);
                                    // console.log(this.response, typeof this.response);
                                    const img = document.getElementById('img3');
                                    console.log(img)
                                    var url = window.URL || window.webkitURL;
                                    img.src = url.createObjectURL(this.response);
                                    img.innerHTML = modalGambar;

                                }
                            }

                            xhr.open("POST", "https://okt20.onlineberkas.com/api/files/get-fileAsset");
                            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
                            xhr.responseType = 'blob';
                            xhr.send(dataImage);


                        }
                    }

                })
            })

        });



        //Per Select Tampilnya
        let id;
        let idHistory;
        let imgPath;
        $(document).ready(function() {

            $('select').change(function(event) {

                idHistory = $('select').val();

                idHistoryInt = parseInt(idHistory);
                console.log(idHistoryInt)
                let card = "";
                const cardtampil = document.getElementById('card-list');
                var settings = {
                    "url": "https://okt20.onlineberkas.com/api/assets/get-history",
                    "method": "POST",
                    "timeout": 0,
                    "headers": {
                        "Content-Type": "application/json"
                    },
                    "data": JSON.stringify({
                        "token": x,
                        "id": idHistoryInt
                    }),
                };

                $.ajax(settings).done(function(response) {

                    let data = (response);

                    // console.log(response);

                    var table = '<table>';
                    var nomor = 1;
                    var list = `<ul>`

                    for (let item of data) {

                        id = item.tanggal;
                        imgPath = item.pathImage;

                        tanggal = new Date(item.tanggal);

                        var tahun = tanggal.getFullYear();
                        var bulan = tanggal.getMonth();
                        var tanggalhari = tanggal.getDate();
                        var hari = tanggal.getDay();

                        switch (hari) {
                            case 0:
                                hari = "Minggu";
                                break;
                            case 1:
                                hari = "Senin";
                                break;
                            case 2:
                                hari = "Selasa";
                                break;
                            case 3:
                                hari = "Rabu";
                                break;
                            case 4:
                                hari = "Kamis";
                                break;
                            case 5:
                                hari = "Jum'at";
                                break;
                            case 6:
                                hari = "Sabtu";
                                break;
                        }

                        switch (bulan) {
                            case 0:
                                bulan = "Januari";
                                break;
                            case 1:
                                bulan = "Februari";
                                break;
                            case 2:
                                bulan = "Maret";
                                break;
                            case 3:
                                bulan = "April";
                                break;
                            case 4:
                                bulan = "Mei";
                                break;
                            case 5:
                                bulan = "Juni";
                                break;
                            case 6:
                                bulan = "Juli";
                                break;
                            case 7:
                                bulan = "Agustus";
                                break;
                            case 8:
                                bulan = "September";
                                break;
                            case 9:
                                bulan = "Oktober";
                                break;
                            case 10:
                                bulan = "November";
                                break;
                            case 11:
                                bulan = "Desember";
                                break;
                        }

                        var tampilTanggal = hari + ", " + tanggalhari + " " + bulan + " " + tahun;


                        table += '<tr>';
                        table += `<td class="text-center">${nomor++}</td>`;
                        table += `<td class="text-center">${tampilTanggal}</td>`;
                        table += `<td class="text-center">${item.selisih}</td>`;
                        table += `<td class="text-center">${item.keterangan}</td>`;
                        table += `<td class="text-center"><button type="button" id="${id}" class="btn btn-small btn-primary id_detail" data-toggle="modal" data-target="#exampleModal">
               Detail
            </button></td>`;
                        table += `<td class="text-center"><button type="button" id="${imgPath}" class="btn btn-small btn-danger id_gambar" data-toggle="modal" data-target="#exampleModalGambar">
               Image
            </button></td>`;
                        table += '</tr>';

                        card += `   <div class="data">  
                <div class="card border  card-header mt-4 font-card bg-card">
                    <span>  <i class="fas fa-clock mr-1"></i> History Counter </span> 
                                    </div>
                                    <ul class="list-group list-group-flush border">
                                        <li class="list-group-item font-list">Keterangan : ${item.keterangan}</li>
                                        <li class="list-group-item font-list">Tanggal : ${tampilTanggal}</li>
                                        <li class="list-group-item font-list">Jumlah Selisih : ${item.selisih}</li>                                                          
                                    </ul>
                                    <div class="card-body border mb-3">
                                        <button type="button" id="${imgPath}" class="btn btn-small btn-card id_gambar" data-toggle="modal" data-target="#exampleModalGambar">
                                           Image
                                        </button>
                                    </div>
                   </div>                 `;

                    }

                    table += '</table>';
                    document.getElementById('demo').innerHTML = table;
                    cardtampil.innerHTML = card;



                    var list = '<ul>'

                    const idDetail = document.querySelectorAll(".id_detail");
                    idDetail.forEach((el) => {
                        el.addEventListener('click', function(event) {
                            const IdDetail = event.target.id;
                            let modal = "";
                            const Modal = document.getElementById('lis');
                            for (let modul of data) {
                                if (IdDetail === modul.tanggal) {
                                    modal += ` <
                                                    li class = "list-group-item" > < span class = "font-weight-bold" > Tanggal < /span>  :    ${modul.tanggal}</li >
                                                    <
                                                    li class = "list-group-item" > < span class = "font-weight-bold" > Selisih < /span>  :     ${modul.selisih}</li >
                                                    <
                                                    li class = "list-group-item" > < span class = "font-weight-bold" > Keterangan < /span>  :     ${modul.keterangan}</li >
                                                    `
                                }
                            }
                            Modal.innerHTML = modal;

                        })
                    })


                    const Path = document.querySelectorAll(".id_gambar");
                    Path.forEach((el) => {
                        el.addEventListener("click", function(event) {
                            const PathGambar = event.target.id;
                            console.log(PathGambar)
                            let modalGambar = "";
                            for (let modul of data) {
                                if (PathGambar === modul.pathImage) {

                                    var dataImage = JSON.stringify({
                                        "namafile": modul.pathImage
                                    });

                                    var xhr = new XMLHttpRequest();
                                    xhr.onreadystatechange = function() {
                                        if (this.readyState == 4 && this.status == 200) {
                                            //this.response is what you're looking for
                                            // handler(this.response);
                                            console.log(this.response, typeof this.response);
                                            const img = document.getElementById('img3');
                                            console.log(img)
                                            var url = window.URL || window.webkitURL;
                                            img.src = url.createObjectURL(this.response);
                                            img.innerHTML = modalGambar;

                                        }
                                    }

                                    xhr.open("POST", "https://okt20.onlineberkas.com/api/files/get-fileAsset");
                                    xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
                                    xhr.responseType = 'blob';
                                    xhr.send(dataImage);


                                }
                            }

                        })
                    })

                });
            });
        });
    </script>


    <script>
        // function funcImg() {
        //     var data = JSON.stringify({
        //         "namafile": "(7) PDAM APT N2 20-11-05 13.jpeg"
        //     });

        //     var xhr = new XMLHttpRequest();
        //     xhr.onreadystatechange = function() {
        //         if (this.readyState == 4 && this.status == 200) {
        //             //this.response is what you're looking for
        //             // handler(this.response);
        //             // console.log(this.response, typeof this.response);
        //             var img = document.getElementById('img2');
        //             console.log(img)
        //             var url = window.URL || window.webkitURL;
        //             img.src = url.createObjectURL(this.response);
        //         }
        //     }

        //     xhr.open("POST", "https://okt20.onlineberkas.com/api/files/get-fileAsset");
        //     xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        //     xhr.responseType = 'blob';
        //     xhr.send(data);
        // }
    </script>

    <!--Menu-->
    <script>
        let menu;
        var settings = {
            "url": "https://okt20.onlineberkas.com/api/menus/get-menu",
            "method": "GET",
            "timeout": 0,
            "headers": {
                "Content-Type": "application/json"
            },
            "data": JSON.stringify({}),
        };

        $.ajax(settings).done(function(response) {

            menu = response;

            let html = "";
            menu.forEach(data => {

                if (data.menuSubs == null) {
                    html += `<a class="nav-link" href="${data.namaLink}">
                                <div class="sb-nav-link-icon"><i class="fas fa-folder-open text-white"></i></div>
                                ${data.namaMenu}
                            </a>`
                } else {
                    let submenu = "";
                    data.menuSubs.forEach(dataMenuSubs => {
                        console.log(dataMenuSubs)
                        submenu += `<a class="nav-link" href="${dataMenuSubs.namaLink}">
                                <div class="sb-nav-link-icon"><i class="fas fa-folder-open text-white"></i></div>
                                ${dataMenuSubs.namaMenu}
                           </a>`
                            //aria-expanded="true" 
                            // data-toggle="collapse" data-target="#pagesCollapseAuth" aria-controls="pagesCollapseAuth"
                    })
                    html += `<a class="nav-link " href="#" id="submenu">
                                <div class="sb-nav-link-icon text-white"><i class="fas fa-folder-open"></i></div>
                                ${data.namaMenu}
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class ="collapse" id="pagesCollapseAuth" aria-labelledby="headingOne" data-parent="#sidenavAccordionPages">
                                <nav class="sb-sidenav-menu-nested nav" id="menuSubs">
                                    ${submenu}
                                </nav>
                            </div>`

                }

                document.getElementById('sidenavAccordionPages').innerHTML = html;
            })
            document.querySelectorAll('#submenu').forEach((Menu, id) => {
                console.log(id)
                const subMenu = document.querySelectorAll('#pagesCollapseAuth');
                Menu.addEventListener('click', function(event) {
                    console.log(subMenu[id])
                    if (subMenu[id].classList.contains('show')) {
                        subMenu[id].classList.remove('show')

                    } else {

                        subMenu[id].classList.add('show')
                    }

                })
            })



        });
    </script>

    <!-- BODY CONTAKS-->
    <script>
        const bodY = document.getElementById('layoutSidenav_content')
        document.getElementById('layoutSidenav_content').addEventListener('click', function(el) {
            console.log(bodY)
            if (bodY.classList) {
                document.getElementById('body').classList.remove("sb-sidenav-toggled");
            } else {
                console.log(document.getElementById('body').classList.contains('sb-sidenav-toggled'))
            }

        })
    </script>

    <!-- HAPUS DATA LOCALSTROGA-->
    <script>
        function deleteItems() {
            localStorage.clear();
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="js/scripts.js"></script>

    <!-- CHAR DIAGRAM

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
     <script src="assets/demo/chart-bar-demo.js"></script>
    <script src="assets/demo/chart-area-demo.js"></script>
   -->

    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js" crossorigin="anonymous"></script>
    <script src="assets/demo/datatables-demo.js"></script>
</body>

</html>