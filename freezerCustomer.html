<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Dashboard </title>
    <link href="css/styles.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet" crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js" crossorigin="anonymous"></script>
    <!--Jquery 3.4.0 manual-->
    <script src="js/jquery.js"></script>
    <!-- AJAX HARUS ADA-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script>
        window.onload = () => {

            // Clear localStorage
            if (localStorage.getItem('token') === 'true') {
                localStorage.removeItem('token');
                // Show them the sign in form
            }
        };
    </script>

    <style>
        .table-custom {
            background-color: #244065;
        }
        
        .table-custom th {
            color: white;
        }
        
        tbody tr:nth-child(even) {
            background-color: #D6EAF8;
            color: #244065;
        }
        
        .card-custom {
            display: none;
        }
        
        .card {
            border: none;
        }
        
        .myInputHp {
            display: none;
        }
        
        .bg-card {
            background-color: #244065;
        }
        
        .font-card {
            color: #F9E79F;
            font-size: 17px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .font-list {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif
        }
        
        .bg-alert {
            background-color: #dbccb7;
        }
        
        .btn-back {
            background-color: #a77a39;
            color: white;
        }
        
        .btn-card {
            background-color: #67bcdb;
            color: white;
        }
        
        .myCard {
            padding: 15px 15px 1px 15px;
        }
        
        .myCard2 {
            padding: 8px 20px 20px 20px;
        }
        
        .img-custom img {
            width: 100%;
            height: 300px;
        }
        
        @media only screen and (max-width: 480px) {
            table {
                display: none;
            }
            .card-custom {
                display: inline;
            }
            .myInputHp {
                display: inline;
                border: 1px solid #67bcdb;
                color: white
            }
            .myInputHp2 {
                background-color: #67bcdb;
            }
        }
        /*         
        .fixed-top, .sb-nav-fixed #layoutSidenav #layoutSidenav_nav, .sb-nav-fixed .sb-topnav {
        position: fixed;
        top: 0;
        right: 0;
        left: 0;
        z-index: 1030;
        }

        .fixed-bottom {
        position: fixed;
        right: 0;
        bottom: 0;
        left: 0;
        z-index: 1030;
        }
        
        .sb-sidenav-toggled #layoutSidenav #layoutSidenav_nav {
            transform: translateX(0);
        }
        
        .sb-sidenav-toggled #layoutSidenav #layoutSidenav_content:before {
            content: "";
            display: block;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 1037;
            opacity: 0.5;
            transition: opacity 0.3s ease-in-out;
        } */
    </style>
</head>


<body class="sb-nav-fixed" id="body">
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
        <a class="navbar-brand" href="Dashboard.html">Brasil Management</a>
        <button class="btn btn-link btn-sm order-1 order-lg-0 tombol" id="sidebarToggle" href="#"><i class="fas fa-bars"></i></button>
        <!-- Navbar Search-->
        <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0">
            <div class="input-group">
                <input class="form-control" id="myInput" type="text" placeholder="Search for..." aria-label="Search" aria-describedby="basic-addon2" />
                <div class="input-group-append">
                    <button class="btn btn-primary" type="button"><i class="fas fa-search"></i></button>
                </div>
            </div>
        </form>
        <!-- Navbar-->
        <ul class="navbar-nav ml-auto ml-md-0">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="userDropdown" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <script>
                        var n = localStorage.getItem("username");
                        document.getElementById("userDropdown").innerHTML = `<i class="fas fa-user fa-fw text-white"></i> ` + n;
                    </script>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                    <a class="dropdown-item" href="HistoryLogin.html"> <i class="fas fa-user-clock mr-2 text-success"></i>Activity Log</a>
                    <a class="dropdown-item" href="updatepassword.html"><i class="fas fa-unlock-alt mr-2 text-warning"></i>Update Password</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="index.html" onclick="deleteItems()"><i class="fas fa-power-off mr-2 text-danger"></i>Logout</a>
                </div>
            </li>
        </ul>
    </nav>
    <div id="layoutSidenav">
        <div id="layoutSidenav_nav">
            <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                <div class="sb-sidenav-menu">
                    <div class="nav">
                        <div class="sb-sidenav-menu-heading text-white">Interface</div>
                        <a class="nav-link text-light" href="Dashboard.html">
                            <div class="sb-nav-link-icon "><i class="fas fa-home text-white"></i>
                            </div>
                            Dashboard
                        </a>
                        <div class="sb-sidenav-menu-heading text-white" style="padding: 18px 16px 12px;">Menu </div>
                        <div id="sidenavAccordionPages">

                        </div>
                        <div class="sb-sidenav-menu-heading"></div>

                        <!-- <a class="nav-link" href="tables.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            MONITOR BARANG
                        </a>
                        <a class="nav-link" href="asset.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            MONITOR ASSET
                        </a>
                        <a class="nav-link" href="getAsset.html">
                            <div class="sb-nav-link-icon"><i class="fas fa-table"></i></div>
                            MONITOR HISTORY ASSET
                        </a> -->
                    </div>
                </div>
                <div class="sb-sidenav-footer">
                    <div class="small text-white " id="user"></div>
                    <script>
                        var n = localStorage.getItem("username");
                        document.getElementById("user").innerHTML = `Logged in as   : ` + n;
                    </script>
                </div>
            </nav>
        </div>
        <div id="layoutSidenav_content">
            <main id="main">
                <div class="container-fluid">
                    <h1 class="mt-4"></h1>
                    <ol class="breadcrumb mb-4 alert bg-alert" role="alert">
                        <li class="breadcrumb-item">MENU FREEZER CUSTOMER</li>
                    </ol>
                    <div class="card mb-4">
                        <div class="card-body myCard">
                            <div class="input-group">
                                <input class="form-control border myInputHp" id="myInputHp" type="text" placeholder="Search Freezer" aria-label="Search" aria-describedby="basic-addon2" />
                                <div class="input-group-append">
                                    <button class="btn myInputHp myInputHp2" type="button"><i class="fas fa-search"></i></button>
                                </div>
                            </div>
                            <a type="button" class="btn btn-back mt-4 mb-2" href="HistoryKunjungan.html">Back Menu History Kunjungan</a>
                        </div>
                        <div class="card mb-4">
                            <div class="card-body myCard2">
                                <!--Table Resposive-->
                                <div class="table-responsive">
                                    <table class="table table-hover table-bordered" width="100%" cellspacing="0">
                                        <thead class="table-custom">
                                            <tr>
                                                <th class="text-center">Type Frezer</th>
                                                <th class="text-center">No Seri</th>
                                                <th class="text-center">Kapasitas</th>
                                            </tr>
                                        </thead>
                                        <tbody id="demo">
                                        </tbody>
                                    </table>
                                </div>
                                <!-- Card Resposive-->
                                <div class="card-custom" id="card-list">
                                </div>
                            </div>
                            <div class="card-mb4 ">
                                <div class="card-body myCard2">
                                    <!--Card Upload Gambar-->
                                    <div class="row">
                                        <div class="col-md-12">
                                            <h4>Review Image</h4>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-1">
                                        </div>
                                        <div class="col-md-4">
                                            <!--Lokasi-->
                                            <div class="card border mt-3 img-custom" style="width: 18rem;">
                                                <img class="card-img-top" id="imgFreezerLokasi" src="" alt="Card image cap">
                                                <div class="card-body">
                                                    <h5 class="card-title">Gambar Lokasi</h5>
                                                    <p class="card-text">Fotolah Lokasi Toko </p>
                                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ModalLokasi">
                                                        Upload Gambar
                                                      </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                        </div>
                                        <div class="col-md-4">
                                            <!--Awal-->
                                            <div class="card border mt-3 img-custom" style="width: 18rem;">
                                                <img class="card-img-top" id="imgFreezerAwal" src="" alt="Card image cap">
                                                <div class="card-body">
                                                    <h5 class="card-title">Gambar Awal</h5>
                                                    <p class="card-text">Fotolah Freezer Toko</p>
                                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ModalAwal">
                                                        Upload Gambar
                                                      </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-1">
                                        </div>
                                        <div class="col-md-4">
                                            <!--Stock-->
                                            <div class="card border mt-5 img-custom" style="width: 18rem;">
                                                <img class="card-img-top" id="imgFreezerStock" src="" alt="Card image cap">

                                                <div class="card-body">
                                                    <h5 class="card-title">Gambar Stock</h5>
                                                    <p class="card-text">Fotolah Stock Es di Freezer</p>
                                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ModalStock">
                                                        Upload Gambar
                                                      </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-2">
                                        </div>
                                        <div class="col-md-4">
                                            <!--Display-->
                                            <div class="card border mt-5 img-custom" style="width: 18rem;">
                                                <img class="card-img-top" id="imgFreezerDisplay" src="" alt="Card image cap">
                                                <div class="card-body">
                                                    <h5 class="card-title">Gambar Display</h5>
                                                    <p class="card-text">Fotolah Display Freezer di Toko</p>
                                                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ModalDisplay">
                                                        Upload Gambar
                                                      </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-1">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
            <footer class="py-4 bg-light mt-auto">
                <div class="container-fluid">
                    <div class="d-flex align-items-center justify-content-between small">
                        <div class="text-muted">Copyright &copy; Brasil Store 2020</div>
                        <div>
                            <a href="#">Privacy Policy</a> &middot;
                            <a href="#">Terms &amp; Conditions</a>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- Modal Lokasi-->
    <div class="modal fade" id="ModalLokasi" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Silahkan Upload</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="history.go(0);">
        <span aria-hidden=" true ">&times;</span>
      </button>
                </div>
                <div class="modal-body ">
                    <label for="exampleFormControlFile1 ">Upload Gambar</label>
                    <input type="file" name="fileInput" id="fileInputLokasi" class="form-control-file">
                    <br>
                    <img id="imgLokasi" src=" " class="img-fluid" style="display:none;" alt="Responsive image " />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="history.go(0);">Close</button>
                    <button type="submit" class="btn btn-primary" id="uploadLokasi">Upload</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal LokasiView-->
    <div class="modal fade" id="ModalLokasiView" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Silahkan Upload</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="history.go(0);">
        <span aria-hidden=" true ">&times;</span>
      </button>
                </div>
                <div class="modal-body ">
                    <img id="imgLokasiView" src=" " class="img-fluid" style="display:none;" alt="Responsive image " />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="history.go(0);">Close</button>
                    <button type="submit" class="btn btn-primary" id="uploadLokasi">Upload</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Awal -->
    <div class="modal fade" id="ModalAwal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Silahkan Upload</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="history.go(0);">
        <span aria-hidden=" true ">&times;</span>
      </button>
                </div>
                <div class="modal-body ">
                    <label for="exampleFormControlFile1 ">Upload Gambar</label>
                    <input type="file" name="fileInput" id="fileInputAwal" class="form-control-file">
                    <br>
                    <img id="imgAwal" src=" " class="img-fluid" style="display:none;" alt="Responsive image " />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="history.go(0);">Close</button>
                    <button type="submit" class="btn btn-primary" id="uploadAwal">Upload</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Stock-->
    <div class="modal fade" id="ModalStock" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Silahkan Upload</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="history.go(0);">
        <span aria-hidden=" true ">&times;</span>
      </button>
                </div>
                <div class="modal-body ">
                    <label for="exampleFormControlFile1 ">Upload Gambar</label>
                    <input type="file" name="fileInput" id="fileInputStock" class="form-control-file">
                    <br>
                    <img id="imgStock" src=" " class="img-fluid" style="display:none;" alt="Responsive image " />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="history.go(0);">Close</button>
                    <button type="submit" class="btn btn-primary" id="uploadStock">Upload</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Display-->
    <div class="modal fade" id="ModalDisplay" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Silahkan Upload</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="history.go(0);">
            <span aria-hidden=" true ">&times;</span>
          </button>
                </div>
                <div class="modal-body ">
                    <label for="exampleFormControlFile1 ">Upload Gambar</label>
                    <input type="file" name="fileInput" id="fileInputDisplay" class="form-control-file">
                    <br>
                    <img id="imgDisplay" src="" class="img-fluid" style="display:none;" alt="Responsive image " />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="history.go(0);">Close</button>
                    <button type="submit" class="btn btn-primary" id="uploadDisplay">Upload</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Data-->
    <script>
        $(document).ready(function() {

            $(`#myInput`).on(`keyup`, function() {
                let value = $(this).val().toLowerCase();
                $(`#demo tr`).filter(function() {

                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)

                });
            });
        });
    </script>

    <!-- Search Data HP-->
    <script>
        $(document).ready(function() {

            $(`#myInputHp`).on(`keyup`, function() {
                let value = $(this).val().toLowerCase();
                $(`#card-list .data`).filter(function() {

                    $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)

                });

            });
        });
    </script>

    <!-- NAMPILKAN DATA FREEZER-->
    <script>
        const x = localStorage.getItem("token");
        console.log(x);
        const setoranId = localStorage.getItem("setoranId");
        const customerId = localStorage.getItem("customerId");
        const setoranIdInt = parseInt(setoranId)
        const customerIdInt = parseInt(customerId)
        let idFreezer;
        var settings = {
            "url": "https://okt20.onlineberkas.com/api/setorans/get-freezerCustomer",
            "method": "POST",
            "timeout": 0,
            "headers": {
                "Content-Type": "application/json"
            },
            "data": JSON.stringify({
                "token": x,
                "setoranId": setoranIdInt,
                "customerId": customerIdInt
            }),
        };

        $.ajax(settings).done(function(response) {

            let data = (response);

            var table = '<table>';
            var nomor = 1;
            var list = `<ul>`
            let card = "";
            const cardtampil = document.getElementById('card-list');

            for (let item of data) {

                idFreezer = item.freezerId;

                table += '<tr >';
                table += `<td class="text-center">${item.typeFrezer}</td>`;
                table += `<td class="text-center">${item.noSeri}</td>`;
                table += `<td class="text-center ">${item.kapasitas}</td>`;

                table += '</tr>';


                card += `   
                    <div class="data"> 
                     <div class="card border card-header mt-4 font-card bg-card">
                            <span> <i class="fas fa-store-alt mr-2 text-warning"></i> ${item.typeFrezer}<span> 
                                    </div>
                                    <ul class="list-group list-group-flush border">
                                        <li class="list-group-item class="font-list">No Seri : ${item.noSeri}</li>
                                        <li class="list-group-item class="font-list"">Kapasitas : ${item.kapasitas}</li>                              
                                    </ul>
        
                                    </div>
                                    `;
                localStorage.setItem('IdFreezer', idFreezer);
            }

            table += '</table>';
            document.getElementById('demo').innerHTML = table
            cardtampil.innerHTML = card;



            var list = '<ul>'

            const idDetail = document.querySelectorAll(".id_detail");
            idDetail.forEach((el) => {
                el.addEventListener('click', function(event) {
                    const IdDetail = parseInt(event.target.id);
                    let modal = "";
                    const Modal = document.getElementById('lis');
                    for (let modul of data) {
                        if (IdDetail === modul.customerId) {
                            modal += `
                            <li class="list-group-item"><span class="font-weight-bold">Jarak</span>  :    ${modul.jarak}</li>
                            <li class="list-group-item"><span class="font-weight-bold">Juice</span>  :     ${modul.juice}</li>
                            <li class="list-group-item"><span class="font-weight-bold">Box</span>  :     ${modul.box}</li>
                            `
                        }
                    }
                    Modal.innerHTML = modal;

                })
            })


        });
    </script>

    <!--Data Freezer and gambar-->
    <script>
        const freezerId = localStorage.getItem("IdFreezer");
        const freezerIdInt = parseInt(freezerId)
        let tempGambarId;
        let pathLokasi;
        let pathAwal;
        let pathStock;
        let pathDisplay;


        var settings = {
            "url": "https://okt20.onlineberkas.com/api/setorans/get-tempGambarFreezer",
            "method": "POST",
            "timeout": 0,
            "headers": {
                "Content-Type": "application/json"
            },
            "data": JSON.stringify({
                "token": x,
                "setoranId": setoranIdInt,
                "customerId": customerIdInt,
                "freezerId": freezerIdInt
            }),
        };

        $.ajax(settings).done(function(response) {


            let DataFreezer = (response)

            tempGambarId = DataFreezer.id;
            pathLokasi = DataFreezer.pathLokasi;
            pathAwal = DataFreezer.pathAwal;
            pathStock = DataFreezer.pathStock;
            pathDisplay = DataFreezer.pathDisplay;

            localStorage.setItem('tempGambarId', tempGambarId);
            // localStorage.setItem('pathLokasi', pathLokasi);
            // localStorage.setItem('pathAwal', pathAwal);
            // localStorage.setItem('pathStock', pathStock);
            // localStorage.setItem('pathDisplay', pathDisplay);

            //Nampilin Gambar Lokasi
            var dataImage = JSON.stringify({
                "token": x,
                "namafile": pathLokasi
            });
            let modalViewLokasi = "";
            var xhr = new XMLHttpRequest();

            xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    //this.response is what you're looking for
                    // handler(this.response);
                    // console.log(this.response, typeof this.response);

                    const img = document.getElementById('imgFreezerLokasi');
                    const imgView = document.getElementById('imgLokasiView');
                    console.log(img)
                    var url = window.URL || window.webkitURL;
                    img.src = url.createObjectURL(this.response);
                    imgView.src = url.createObjectURL(this.response);
                    imgView.innerHTML = modalViewLokasi;
                }

            }

            xhr.open("POST", "https://okt20.onlineberkas.com/api/files/get-fileFreezer");
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.responseType = 'blob';
            xhr.send(dataImage);

            //Nampilin gambar Awal
            var dataImage = JSON.stringify({
                "token": x,
                "namafile": pathAwal
            });

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    //this.response is what you're looking for
                    // handler(this.response);
                    // console.log(this.response, typeof this.response);
                    const img = document.getElementById('imgFreezerAwal');
                    console.log(img)
                    var url = window.URL || window.webkitURL;
                    img.src = url.createObjectURL(this.response);

                }
            }

            xhr.open("POST", "https://okt20.onlineberkas.com/api/files/get-fileFreezer");
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.responseType = 'blob';
            xhr.send(dataImage);

            //Nampilin Gambar Stock
            var dataImage = JSON.stringify({
                "token": x,
                "namafile": pathStock
            });

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    //this.response is what you're looking for
                    // handler(this.response);
                    // console.log(this.response, typeof this.response);
                    const img = document.getElementById('imgFreezerStock');
                    console.log(img)
                    var url = window.URL || window.webkitURL;
                    img.src = url.createObjectURL(this.response);

                }
            }

            xhr.open("POST", "https://okt20.onlineberkas.com/api/files/get-fileFreezer");
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.responseType = 'blob';
            xhr.send(dataImage);

            //Nampilin gambar Display
            var dataImage = JSON.stringify({
                "token": x,
                "namafile": pathDisplay
            });

            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    //this.response is what you're looking for
                    // handler(this.response);
                    // console.log(this.response, typeof this.response);
                    const img = document.getElementById('imgFreezerDisplay');
                    console.log(img)
                    var url = window.URL || window.webkitURL;
                    img.src = url.createObjectURL(this.response);

                }
            }

            xhr.open("POST", "https://okt20.onlineberkas.com/api/files/get-fileFreezer");
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.responseType = 'blob';
            xhr.send(dataImage);
        });
    </script>


    <!---->
    <!-- <script>
        let pathLokasiGambar = localStorage.getItem("pathLokasi");
    </script> -->

    <!--Nampilin Gambar Freezer Awal-->
    <!-- <script>
        let pathAwalGambar = localStorage.getItem("pathAwal");
    </script> -->

    <!--Nampilin Gambar Freezer Stock-->
    <!-- <script>
        let pathStockGambar = localStorage.getItem("pathStock");
    </script> -->

    <!--Nampilin Gambar Freezer Display-->
    <!-- <script>
        let pathDisplayGambar = localStorage.getItem("pathDisplay");
    </script> -->

    <!-- Upload gambar Lokasi-->
    <script>
        //Ambil Id Freezer
        let idtempGambarId = localStorage.getItem("tempGambarId");
        let pathImgLokasi;
        $('#fileInputLokasi').change(function(event) {
            pathImgLokasi = URL.createObjectURL(event.target.files[0]);
            $("#imgLokasi").fadeIn("fast").attr('src', URL.createObjectURL(event.target.files[0]));
        });


        //MODUL UPLOAD Lokasi

        const buttonUploadLokasi = document.getElementById('uploadLokasi');
        const inputLokasi = document.querySelector('#fileInputLokasi');

        buttonUploadLokasi.addEventListener('click', function(event) {
            event.preventDefault();

            var form = new FormData();
            form.append("token", x);
            form.append("tempGambarId", idtempGambarId);
            form.append("filegambar", inputLokasi.files[0], pathImgLokasi);
            form.append("posisiGambar", "Lokasi");

            var settings = {
                "url": "https://okt20.onlineberkas.com/api/files/upload-gambarFreezer",
                "method": "POST",
                "timeout": 0,
                "processData": false,
                "mimeType": "multipart/form-data",
                "contentType": false,
                "data": form
            };

            $.ajax(settings).done(function(response) {
                // if (!alert(response)) {
                //     window.location.reload();
                // }
                console.log(response);
                location.reload();
            });
        })
    </script>

    <!-- Upload gambar Awal-->
    <script>
        let pathImgAwal;
        $('#fileInputAwal').change(function(event) {
            pathImgAwal = URL.createObjectURL(event.target.files[0]);
            $("#imgAwal").fadeIn("fast").attr('src', URL.createObjectURL(event.target.files[0]));
        });


        //MODUL UPLOAD Awal

        const buttonUploadAwal = document.getElementById('uploadAwal');
        const inputAwal = document.querySelector('#fileInputAwal');

        buttonUploadAwal.addEventListener('click', function(event) {
            event.preventDefault();

            var form = new FormData();
            form.append("token", x);
            form.append("tempGambarId", idtempGambarId);
            form.append("filegambar", inputAwal.files[0], pathImgAwal);
            form.append("posisiGambar", "Awal");

            var settings = {
                "url": "https://okt20.onlineberkas.com/api/files/upload-gambarFreezer",
                "method": "POST",
                "timeout": 0,
                "processData": false,
                "mimeType": "multipart/form-data",
                "contentType": false,
                "data": form
            };

            $.ajax(settings).done(function(response) {
                // if (!alert(response)) {
                //     window.location.reload();
                // }
                console.log(response);
                location.reload();
            });

        })
    </script>

    <!-- Upload gambar Stock-->
    <script>
        let pathImgStock;
        $('#fileInputStock').change(function(event) {
            pathImgStock = URL.createObjectURL(event.target.files[0]);
            $("#imgStock").fadeIn("fast").attr('src', URL.createObjectURL(event.target.files[0]));
        });


        //MODUL UPLOAD Stock

        const buttonUploadStock = document.getElementById('uploadStock');
        const inputStock = document.querySelector('#fileInputStock');

        buttonUploadStock.addEventListener('click', function(event) {
            event.preventDefault();

            var form = new FormData();
            form.append("token", x);
            form.append("tempGambarId", idtempGambarId);
            form.append("filegambar", inputStock.files[0], pathImgStock);
            form.append("posisiGambar", "Stock");

            var settings = {
                "url": "https://okt20.onlineberkas.com/api/files/upload-gambarFreezer",
                "method": "POST",
                "timeout": 0,
                "processData": false,
                "mimeType": "multipart/form-data",
                "contentType": false,
                "data": form
            };

            $.ajax(settings).done(function(response) {
                // if (!alert(response)) {
                //     window.location.reload();
                // }
                console.log(response);
                location.reload();
            });

        })
    </script>

    <!-- Upload gambar Display-->
    <script>
        let pathImgDisplay;
        $('#fileInputDisplay').change(function(event) {
            pathImgDisplay = URL.createObjectURL(event.target.files[0]);
            $("#imgDisplay").fadeIn("fast").attr('src', URL.createObjectURL(event.target.files[0]));
        });


        //MODUL UPLOAD Display

        const buttonUploadDisplay = document.getElementById('uploadDisplay');
        const inputDisplay = document.querySelector('#fileInputDisplay');

        buttonUploadDisplay.addEventListener('click', function(event) {
            event.preventDefault();

            var form = new FormData();
            form.append("token", x);
            form.append("tempGambarId", idtempGambarId);
            form.append("filegambar", inputDisplay.files[0], pathImgDisplay);
            form.append("posisiGambar", "Display");

            var settings = {
                "url": "https://okt20.onlineberkas.com/api/files/upload-gambarFreezer",
                "method": "POST",
                "timeout": 0,
                "processData": false,
                "mimeType": "multipart/form-data",
                "contentType": false,
                "data": form
            };

            $.ajax(settings).done(function(response) {
                // if (!alert(response)) {
                //     window.location.reload();
                // }
                console.log(response);
                location.reload();
            });

        })
    </script>




    <!--Menu-->
    <script>
        let menu;
        var settings = {
            "url": "https://okt20.onlineberkas.com/api/menus/get-menu",
            "method": "GET",
            "timeout": 0,
            "headers": {
                "Content-Type": "application/json"
            },
            "data": JSON.stringify({}),
        };

        $.ajax(settings).done(function(response) {

            menu = response;

            let html = "";
            menu.forEach(data => {

                if (data.menuSubs == null) {
                    html += `<a class="nav-link" href="${data.namaLink}">
                                <div class="sb-nav-link-icon"><i class="fas fa-folder-open text-white"></i></div>
                                ${data.namaMenu}
                            </a>
                      `

                } else {
                    let submenu = "";
                    data.menuSubs.forEach(dataMenuSubs => {
                        console.log(dataMenuSubs)
                        submenu += `<a class="nav-link" href="${dataMenuSubs.namaLink}">
                                <div class="sb-nav-link-icon"><i class="fas fa-folder-open text-white"></i></div>
                                ${dataMenuSubs.namaMenu}
                           </a>`
                            //aria-expanded="true" 
                            // data-toggle="collapse" data-target="#pagesCollapseAuth" aria-controls="pagesCollapseAuth"
                    })
                    html += `<a class="nav-link " href="#" id="submenu">
                                <div class="sb-nav-link-icon text-white"><i class="fas fa-folder-open"></i></div>
                                ${data.namaMenu}
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class ="collapse" id="pagesCollapseAuth" aria-labelledby="headingOne" data-parent="#sidenavAccordionPages">
                                <nav class="sb-sidenav-menu-nested nav" id="menuSubs">
                                    ${submenu}
                                </nav>
                            </div>`

                }

                document.getElementById('sidenavAccordionPages').innerHTML = html;
            })
            document.querySelectorAll('#submenu').forEach((Menu, id) => {
                console.log(id)
                const subMenu = document.querySelectorAll('#pagesCollapseAuth');
                Menu.addEventListener('click', function(event) {
                    console.log(subMenu[id])
                    if (subMenu[id].classList.contains('show')) {
                        subMenu[id].classList.remove('show')

                    } else {

                        subMenu[id].classList.add('show')
                    }

                })
            })



        });
    </script>

    <!-- BODY CONTAKS-->
    <script>
        const bodY = document.getElementById('layoutSidenav_content')
        document.getElementById('layoutSidenav_content').addEventListener('click', function(el) {
            console.log(bodY)
            if (bodY.classList) {
                document.getElementById('body').classList.remove("sb-sidenav-toggled");
            } else {
                console.log(document.getElementById('body').classList.contains('sb-sidenav-toggled'))
            }

        })
    </script>

    <!-- HAPUS DATA LOCALSTROGA-->
    <script>
        function deleteItems() {
            localStorage.clear();
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="js/scripts.js"></script>

    <!-- CHAR DIAGRAM

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
     <script src="assets/demo/chart-bar-demo.js"></script>
    <script src="assets/demo/chart-area-demo.js"></script>
   -->

    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js" crossorigin="anonymous"></script>
    <script src="assets/demo/datatables-demo.js"></script>
</body>

</html>